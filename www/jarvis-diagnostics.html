<!DOCTYPE html>\n<html lang=\"pt-BR\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>üîç Diagn√≥stico do Jarvis - GitHub Pages</title>\n    <style>\n        * {\n            margin: 0;\n            padding: 0;\n            box-sizing: border-box;\n        }\n        \n        body {\n            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n            min-height: 100vh;\n            padding: 20px;\n            color: #333;\n        }\n        \n        .container {\n            max-width: 1000px;\n            margin: 0 auto;\n            background: white;\n            border-radius: 15px;\n            box-shadow: 0 20px 40px rgba(0,0,0,0.1);\n            overflow: hidden;\n        }\n        \n        .header {\n            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n            color: white;\n            padding: 30px;\n            text-align: center;\n        }\n        \n        .header h1 {\n            font-size: 2.5em;\n            margin-bottom: 10px;\n        }\n        \n        .content {\n            padding: 30px;\n        }\n        \n        .test-section {\n            background: #f8f9fa;\n            padding: 20px;\n            border-radius: 10px;\n            margin-bottom: 20px;\n            border-left: 5px solid #667eea;\n        }\n        \n        .test-section h3 {\n            color: #333;\n            margin-bottom: 15px;\n            font-size: 1.3em;\n        }\n        \n        .test-result {\n            padding: 10px;\n            border-radius: 5px;\n            margin: 10px 0;\n            font-family: 'Courier New', monospace;\n        }\n        \n        .test-result.success {\n            background: #d4edda;\n            border: 1px solid #c3e6cb;\n            color: #155724;\n        }\n        \n        .test-result.error {\n            background: #f8d7da;\n            border: 1px solid #f5c6cb;\n            color: #721c24;\n        }\n        \n        .test-result.warning {\n            background: #fff3cd;\n            border: 1px solid #ffeaa7;\n            color: #856404;\n        }\n        \n        .btn {\n            padding: 12px 20px;\n            border: none;\n            border-radius: 8px;\n            font-size: 16px;\n            font-weight: 600;\n            cursor: pointer;\n            margin: 5px;\n            transition: all 0.3s;\n        }\n        \n        .btn-primary {\n            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n            color: white;\n        }\n        \n        .btn-primary:hover {\n            transform: translateY(-2px);\n            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);\n        }\n        \n        .btn-success {\n            background: #28a745;\n            color: white;\n        }\n        \n        .btn-warning {\n            background: #ffc107;\n            color: #212529;\n        }\n        \n        .btn-danger {\n            background: #dc3545;\n            color: white;\n        }\n        \n        .status-indicator {\n            display: inline-block;\n            width: 12px;\n            height: 12px;\n            border-radius: 50%;\n            margin-right: 8px;\n        }\n        \n        .status-success {\n            background: #28a745;\n        }\n        \n        .status-error {\n            background: #dc3545;\n        }\n        \n        .status-warning {\n            background: #ffc107;\n        }\n        \n        .loading {\n            display: inline-block;\n            width: 20px;\n            height: 20px;\n            border: 3px solid #f3f3f3;\n            border-top: 3px solid #667eea;\n            border-radius: 50%;\n            animation: spin 1s linear infinite;\n        }\n        \n        @keyframes spin {\n            0% { transform: rotate(0deg); }\n            100% { transform: rotate(360deg); }\n        }\n        \n        .hidden {\n            display: none;\n        }\n        \n        .code {\n            background: #f1f3f4;\n            padding: 2px 6px;\n            border-radius: 3px;\n            font-family: 'Courier New', monospace;\n            font-size: 0.9em;\n        }\n    </style>\n</head>\n<body>\n    <div class=\"container\">\n        <div class=\"header\">\n            <h1>üîç Diagn√≥stico do Jarvis</h1>\n            <p>Ferramenta de diagn√≥stico para GitHub Pages</p>\n        </div>\n        \n        <div class=\"content\">\n            <!-- Controles -->\n            <div class=\"test-section\">\n                <h3>üéõÔ∏è Controles</h3>\n                <button class=\"btn btn-primary\" onclick=\"runFullDiagnostic()\">üîç Executar Diagn√≥stico Completo</button>\n                <button class=\"btn btn-success\" onclick=\"testAPI()\">üì° Testar API</button>\n                <button class=\"btn btn-warning\" onclick=\"testVoice()\">üé§ Testar Voz</button>\n                <button class=\"btn btn-danger\" onclick=\"clearResults()\">üóëÔ∏è Limpar Resultados</button>\n            </div>\n            \n            <!-- Informa√ß√µes do Sistema -->\n            <div class=\"test-section\">\n                <h3>üíª Informa√ß√µes do Sistema</h3>\n                <div id=\"systemInfo\"></div>\n            </div>\n            \n            <!-- Status dos Componentes -->\n            <div class=\"test-section\">\n                <h3>üß© Status dos Componentes</h3>\n                <div id=\"componentStatus\"></div>\n            </div>\n            \n            <!-- Teste de API -->\n            <div class=\"test-section\">\n                <h3>üì° Teste de Conectividade da API</h3>\n                <div id=\"apiTest\"></div>\n            </div>\n            \n            <!-- Teste de Voz -->\n            <div class=\"test-section\">\n                <h3>üé§ Teste de Sistema de Voz</h3>\n                <div id=\"voiceTest\"></div>\n            </div>\n            \n            <!-- Recomenda√ß√µes -->\n            <div class=\"test-section\">\n                <h3>üí° Recomenda√ß√µes</h3>\n                <div id=\"recommendations\"></div>\n            </div>\n            \n            <!-- Logs -->\n            <div class=\"test-section\">\n                <h3>üìù Logs de Diagn√≥stico</h3>\n                <div id=\"diagnosticLogs\" style=\"max-height: 300px; overflow-y: auto; background: #f8f9fa; padding: 15px; border-radius: 5px; font-family: 'Courier New', monospace; font-size: 12px;\"></div>\n            </div>\n        </div>\n    </div>\n    \n    <script>\n        let diagnosticData = {};\n        \n        // Fun√ß√£o para adicionar logs\n        function addLog(message, type = 'info') {\n            const logsDiv = document.getElementById('diagnosticLogs');\n            const timestamp = new Date().toLocaleTimeString();\n            const logEntry = document.createElement('div');\n            logEntry.style.marginBottom = '5px';\n            \n            let icon = '‚ÑπÔ∏è';\n            let color = '#333';\n            \n            switch(type) {\n                case 'success':\n                    icon = '‚úÖ';\n                    color = '#28a745';\n                    break;\n                case 'error':\n                    icon = '‚ùå';\n                    color = '#dc3545';\n                    break;\n                case 'warning':\n                    icon = '‚ö†Ô∏è';\n                    color = '#ffc107';\n                    break;\n            }\n            \n            logEntry.innerHTML = `<span style=\"color: #666;\">[${timestamp}]</span> <span style=\"color: ${color};\">${icon} ${message}</span>`;\n            logsDiv.appendChild(logEntry);\n            logsDiv.scrollTop = logsDiv.scrollHeight;\n        }\n        \n        // Fun√ß√£o para mostrar resultado de teste\n        function showTestResult(elementId, title, status, details = '') {\n            const element = document.getElementById(elementId);\n            const statusClass = status === 'success' ? 'success' : status === 'error' ? 'error' : 'warning';\n            const statusIcon = status === 'success' ? '‚úÖ' : status === 'error' ? '‚ùå' : '‚ö†Ô∏è';\n            \n            const resultDiv = document.createElement('div');\n            resultDiv.className = `test-result ${statusClass}`;\n            resultDiv.innerHTML = `<strong>${statusIcon} ${title}</strong><br>${details}`;\n            \n            element.appendChild(resultDiv);\n        }\n        \n        // Fun√ß√£o para limpar resultados\n        function clearResults() {\n            const sections = ['systemInfo', 'componentStatus', 'apiTest', 'voiceTest', 'recommendations', 'diagnosticLogs'];\n            sections.forEach(id => {\n                document.getElementById(id).innerHTML = '';\n            });\n            addLog('Resultados limpos', 'info');\n        }\n        \n        // Diagn√≥stico completo\n        async function runFullDiagnostic() {\n            addLog('Iniciando diagn√≥stico completo...', 'info');\n            clearResults();\n            \n            // Informa√ß√µes do sistema\n            await getSystemInfo();\n            \n            // Status dos componentes\n            await checkComponents();\n            \n            // Teste de API\n            await testAPI();\n            \n            // Teste de voz\n            await testVoice();\n            \n            // Gerar recomenda√ß√µes\n            generateRecommendations();\n            \n            addLog('Diagn√≥stico completo finalizado!', 'success');\n        }\n        \n        // Informa√ß√µes do sistema\n        async function getSystemInfo() {\n            addLog('Coletando informa√ß√µes do sistema...', 'info');\n            \n            const info = {\n                userAgent: navigator.userAgent,\n                language: navigator.language,\n                platform: navigator.platform,\n                cookieEnabled: navigator.cookieEnabled,\n                onLine: navigator.onLine,\n                url: window.location.href,\n                protocol: window.location.protocol,\n                hostname: window.location.hostname,\n                isGitHubPages: window.location.hostname.includes('github.io'),\n                isHTTPS: window.location.protocol === 'https:',\n                screenResolution: `${screen.width}x${screen.height}`,\n                viewportSize: `${window.innerWidth}x${window.innerHeight}`,\n                timezone: Intl.DateTimeFormat().resolvedOptions().timeZone\n            };\n            \n            diagnosticData.systemInfo = info;\n            \n            const systemInfoDiv = document.getElementById('systemInfo');\n            systemInfoDiv.innerHTML = `\n                <div class=\"test-result success\">\n                    <strong>üåê Navegador:</strong> ${info.userAgent.split(' ').pop()}<br>\n                    <strong>üåç Idioma:</strong> ${info.language}<br>\n                    <strong>üíª Plataforma:</strong> ${info.platform}<br>\n                    <strong>üîí HTTPS:</strong> ${info.isHTTPS ? '‚úÖ Sim' : '‚ùå N√£o'}<br>\n                    <strong>üì± GitHub Pages:</strong> ${info.isGitHubPages ? '‚úÖ Sim' : '‚ùå N√£o'}<br>\n                    <strong>üì∂ Online:</strong> ${info.onLine ? '‚úÖ Sim' : '‚ùå N√£o'}<br>\n                    <strong>üç™ Cookies:</strong> ${info.cookieEnabled ? '‚úÖ Habilitados' : '‚ùå Desabilitados'}<br>\n                    <strong>üì∫ Resolu√ß√£o:</strong> ${info.screenResolution}<br>\n                    <strong>üñºÔ∏è Viewport:</strong> ${info.viewportSize}<br>\n                    <strong>üïê Fuso Hor√°rio:</strong> ${info.timezone}\n                </div>\n            `;\n            \n            addLog('Informa√ß√µes do sistema coletadas', 'success');\n        }\n        \n        // Verificar componentes\n        async function checkComponents() {\n            addLog('Verificando componentes do Jarvis...', 'info');\n            \n            const components = {\n                jquery: typeof $ !== 'undefined',\n                speechRecognition: 'webkitSpeechRecognition' in window || 'SpeechRecognition' in window,\n                speechSynthesis: 'speechSynthesis' in window,\n                siriWave: typeof SiriWave !== 'undefined',\n                jarvisConfig: typeof window.jarvisConfig !== 'undefined',\n                jarvisTTS: typeof window.jarvisTTS !== 'undefined',\n                jarvisSpeechRecognition: typeof window.jarvisSpeechRecognition !== 'undefined',\n                textillate: typeof $.fn.textillate !== 'undefined',\n                bootstrap: typeof bootstrap !== 'undefined'\n            };\n            \n            diagnosticData.components = components;\n            \n            const componentStatusDiv = document.getElementById('componentStatus');\n            \n            Object.entries(components).forEach(([name, status]) => {\n                const statusText = status ? 'Carregado' : 'N√£o encontrado';\n                const statusType = status ? 'success' : 'error';\n                showTestResult('componentStatus', name, statusType, statusText);\n                addLog(`Componente ${name}: ${statusText}`, status ? 'success' : 'error');\n            });\n        }\n        \n        // Testar API\n        async function testAPI() {\n            addLog('Testando conectividade da API...', 'info');\n            \n            const apiUrls = [\n                'https://jarvis-api.onrender.com',\n                'https://jarvis-api-joao-manoel.onrender.com'\n            ];\n            \n            for (const apiUrl of apiUrls) {\n                try {\n                    addLog(`Testando ${apiUrl}...`, 'info');\n                    \n                    const controller = new AbortController();\n                    const timeoutId = setTimeout(() => controller.abort(), 15000);\n                    \n                    const response = await fetch(apiUrl + '/health', {\n                        method: 'GET',\n                        signal: controller.signal\n                    });\n                    \n                    clearTimeout(timeoutId);\n                    \n                    if (response.ok) {\n                        const data = await response.json();\n                        showTestResult('apiTest', `API ${apiUrl}`, 'success', \n                            `Status: ${data.status}<br>` +\n                            `Provedor: ${data.api_provider}<br>` +\n                            `Configurada: ${data.api_configured ? 'Sim' : 'N√£o'}<br>` +\n                            `Tempo de resposta: ${response.headers.get('x-response-time') || 'N/A'}`\n                        );\n                        addLog(`API ${apiUrl} funcionando corretamente`, 'success');\n                        \n                        // Testar comando\n                        await testAPICommand(apiUrl);\n                        \n                    } else {\n                        showTestResult('apiTest', `API ${apiUrl}`, 'error', \n                            `Erro HTTP ${response.status}: ${response.statusText}`\n                        );\n                        addLog(`API ${apiUrl} retornou erro ${response.status}`, 'error');\n                    }\n                    \n                } catch (error) {\n                    let errorMessage = error.message;\n                    \n                    if (error.name === 'AbortError') {\n                        errorMessage = 'Timeout - API demorou mais de 15 segundos para responder';\n                    } else if (error.message.includes('Failed to fetch')) {\n                        errorMessage = 'Erro de conex√£o - API pode estar offline';\n                    }\n                    \n                    showTestResult('apiTest', `API ${apiUrl}`, 'error', errorMessage);\n                    addLog(`Erro ao testar ${apiUrl}: ${errorMessage}`, 'error');\n                }\n            }\n        }\n        \n        // Testar comando da API\n        async function testAPICommand(apiUrl) {\n            try {\n                addLog(`Testando comando na API ${apiUrl}...`, 'info');\n                \n                const response = await fetch(apiUrl + '/command', {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json'\n                    },\n                    body: JSON.stringify({ message: 'Teste de diagn√≥stico' })\n                });\n                \n                if (response.ok) {\n                    const data = await response.json();\n                    if (data.reply) {\n                        showTestResult('apiTest', `Comando de teste ${apiUrl}`, 'success', \n                            `Resposta recebida: ${data.reply.substring(0, 100)}...`\n                        );\n                        addLog(`Comando de teste funcionou na API ${apiUrl}`, 'success');\n                    }\n                } else {\n                    showTestResult('apiTest', `Comando de teste ${apiUrl}`, 'error', \n                        `Erro no comando: ${response.status}`\n                    );\n                    addLog(`Comando de teste falhou na API ${apiUrl}`, 'error');\n                }\n                \n            } catch (error) {\n                showTestResult('apiTest', `Comando de teste ${apiUrl}`, 'error', \n                    `Erro: ${error.message}`\n                );\n                addLog(`Erro no comando de teste: ${error.message}`, 'error');\n            }\n        }\n        \n        // Testar sistema de voz\n        async function testVoice() {\n            addLog('Testando sistema de voz...', 'info');\n            \n            // Testar Speech Recognition\n            const speechRecognitionSupported = 'webkitSpeechRecognition' in window || 'SpeechRecognition' in window;\n            \n            if (speechRecognitionSupported) {\n                showTestResult('voiceTest', 'Speech Recognition', 'success', 'API dispon√≠vel no navegador');\n                addLog('Speech Recognition suportado', 'success');\n                \n                // Testar permiss√£o de microfone\n                try {\n                    const stream = await navigator.mediaDevices.getUserMedia({ audio: true });\n                    showTestResult('voiceTest', 'Permiss√£o de Microfone', 'success', 'Acesso concedido');\n                    addLog('Permiss√£o de microfone concedida', 'success');\n                    \n                    // Parar o stream\n                    stream.getTracks().forEach(track => track.stop());\n                } catch (error) {\n                    showTestResult('voiceTest', 'Permiss√£o de Microfone', 'error', \n                        `Erro: ${error.name} - ${error.message}`\n                    );\n                    addLog(`Erro na permiss√£o de microfone: ${error.message}`, 'error');\n                }\n            } else {\n                showTestResult('voiceTest', 'Speech Recognition', 'error', 'N√£o suportado neste navegador');\n                addLog('Speech Recognition n√£o suportado', 'error');\n            }\n            \n            // Testar Speech Synthesis\n            const speechSynthesisSupported = 'speechSynthesis' in window;\n            \n            if (speechSynthesisSupported) {\n                const voices = speechSynthesis.getVoices();\n                showTestResult('voiceTest', 'Text-to-Speech', 'success', \n                    `${voices.length} vozes dispon√≠veis`\n                );\n                addLog(`Text-to-Speech suportado com ${voices.length} vozes`, 'success');\n                \n                // Testar fala\n                const testUtterance = new SpeechSynthesisUtterance('Teste de diagn√≥stico do Jarvis');\n                testUtterance.volume = 0.1; // Volume baixo para n√£o incomodar\n                speechSynthesis.speak(testUtterance);\n                \n                showTestResult('voiceTest', 'Teste de Fala', 'success', 'Teste de √°udio executado');\n                addLog('Teste de fala executado', 'success');\n            } else {\n                showTestResult('voiceTest', 'Text-to-Speech', 'error', 'N√£o suportado neste navegador');\n                addLog('Text-to-Speech n√£o suportado', 'error');\n            }\n        }\n        \n        // Gerar recomenda√ß√µes\n        function generateRecommendations() {\n            addLog('Gerando recomenda√ß√µes...', 'info');\n            \n            const recommendations = [];\n            const systemInfo = diagnosticData.systemInfo;\n            const components = diagnosticData.components;\n            \n            // Verificar HTTPS\n            if (!systemInfo.isHTTPS) {\n                recommendations.push({\n                    type: 'error',\n                    title: 'Use HTTPS',\n                    description: 'O reconhecimento de voz requer HTTPS para funcionar corretamente.'\n                });\n            }\n            \n            // Verificar componentes\n            if (!components.speechRecognition) {\n                recommendations.push({\n                    type: 'warning',\n                    title: 'Navegador Compat√≠vel',\n                    description: 'Use Chrome, Edge ou Safari para melhor suporte ao reconhecimento de voz.'\n                });\n            }\n            \n            if (!components.jarvisConfig) {\n                recommendations.push({\n                    type: 'error',\n                    title: 'Configura√ß√µes N√£o Carregadas',\n                    description: 'O arquivo jarvis-config.js n√£o foi carregado corretamente.'\n                });\n            }\n            \n            // Verificar conectividade\n            if (!systemInfo.onLine) {\n                recommendations.push({\n                    type: 'error',\n                    title: 'Conex√£o com Internet',\n                    description: 'Verifique sua conex√£o com a internet.'\n                });\n            }\n            \n            // Recomenda√ß√µes gerais\n            recommendations.push({\n                type: 'success',\n                title: 'Limpar Cache',\n                description: 'Se houver problemas, tente limpar o cache do navegador (Ctrl+Shift+R).'\n            });\n            \n            recommendations.push({\n                type: 'success',\n                title: 'Console do Navegador',\n                description: 'Pressione F12 e veja a aba Console para logs detalhados.'\n            });\n            \n            const recommendationsDiv = document.getElementById('recommendations');\n            \n            if (recommendations.length === 0) {\n                showTestResult('recommendations', 'Sistema OK', 'success', 'Nenhuma recomenda√ß√£o necess√°ria');\n            } else {\n                recommendations.forEach(rec => {\n                    showTestResult('recommendations', rec.title, rec.type, rec.description);\n                });\n            }\n            \n            addLog(`${recommendations.length} recomenda√ß√µes geradas`, 'info');\n        }\n        \n        // Inicializar p√°gina\n        window.onload = function() {\n            addLog('P√°gina de diagn√≥stico carregada', 'info');\n            addLog('Clique em \"Executar Diagn√≥stico Completo\" para come√ßar', 'info');\n        };\n    </script>\n</body>\n</html>"