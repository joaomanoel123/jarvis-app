<!DOCTYPE html>\n<html lang=\"pt-BR\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Teste Google Cloud TTS - J.A.R.V.I.S</title>\n    <style>\n        body {\n            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);\n            color: white;\n            margin: 0;\n            padding: 20px;\n            min-height: 100vh;\n        }\n        .container {\n            max-width: 800px;\n            margin: 0 auto;\n            background: rgba(255, 255, 255, 0.1);\n            border-radius: 15px;\n            padding: 30px;\n            backdrop-filter: blur(10px);\n            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);\n        }\n        h1 {\n            text-align: center;\n            margin-bottom: 30px;\n            color: #00AAFF;\n        }\n        .section {\n            margin-bottom: 25px;\n            padding: 20px;\n            background: rgba(255, 255, 255, 0.05);\n            border-radius: 10px;\n            border-left: 4px solid #00AAFF;\n        }\n        .input-group {\n            margin-bottom: 15px;\n        }\n        label {\n            display: block;\n            margin-bottom: 5px;\n            font-weight: bold;\n        }\n        input, select, textarea {\n            width: 100%;\n            padding: 10px;\n            border: none;\n            border-radius: 5px;\n            background: rgba(255, 255, 255, 0.9);\n            color: #333;\n            font-size: 14px;\n        }\n        textarea {\n            height: 100px;\n            resize: vertical;\n        }\n        button {\n            background: linear-gradient(45deg, #00AAFF, #0088CC);\n            color: white;\n            border: none;\n            padding: 12px 25px;\n            border-radius: 25px;\n            cursor: pointer;\n            font-size: 16px;\n            margin: 5px;\n            transition: all 0.3s ease;\n        }\n        button:hover {\n            transform: translateY(-2px);\n            box-shadow: 0 5px 15px rgba(0, 170, 255, 0.4);\n        }\n        button:disabled {\n            opacity: 0.5;\n            cursor: not-allowed;\n        }\n        .status {\n            padding: 10px;\n            border-radius: 5px;\n            margin-top: 10px;\n            font-weight: bold;\n        }\n        .status.success {\n            background: rgba(0, 255, 0, 0.2);\n            border: 1px solid #00FF00;\n        }\n        .status.error {\n            background: rgba(255, 0, 0, 0.2);\n            border: 1px solid #FF0000;\n        }\n        .status.info {\n            background: rgba(0, 170, 255, 0.2);\n            border: 1px solid #00AAFF;\n        }\n        .voice-grid {\n            display: grid;\n            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n            gap: 10px;\n            margin-top: 15px;\n        }\n        .voice-option {\n            background: rgba(255, 255, 255, 0.1);\n            padding: 10px;\n            border-radius: 5px;\n            cursor: pointer;\n            transition: all 0.3s ease;\n        }\n        .voice-option:hover {\n            background: rgba(0, 170, 255, 0.3);\n        }\n        .voice-option.selected {\n            background: rgba(0, 170, 255, 0.5);\n            border: 2px solid #00AAFF;\n        }\n        .logs {\n            background: #000;\n            color: #00FF00;\n            padding: 15px;\n            border-radius: 5px;\n            font-family: 'Courier New', monospace;\n            font-size: 12px;\n            height: 200px;\n            overflow-y: auto;\n            white-space: pre-wrap;\n        }\n    </style>\n</head>\n<body>\n    <div class=\"container\">\n        <h1>üåê Teste Google Cloud Text-to-Speech</h1>\n        \n        <div class=\"section\">\n            <h3>üîë Configura√ß√£o da API</h3>\n            <div class=\"input-group\">\n                <label for=\"apiKey\">Chave da API do Google Cloud:</label>\n                <input type=\"password\" id=\"apiKey\" placeholder=\"Cole sua API key aqui...\">\n                <button onclick=\"saveApiKey()\">üíæ Salvar Chave</button>\n                <button onclick=\"clearApiKey()\">üóëÔ∏è Limpar</button>\n            </div>\n            <div id=\"apiStatus\" class=\"status info\">‚ÑπÔ∏è Configure sua API key para come√ßar</div>\n        </div>\n        \n        <div class=\"section\">\n            <h3>üé§ Sele√ß√£o de Voz</h3>\n            <div class=\"voice-grid\" id=\"voiceGrid\">\n                <!-- Vozes ser√£o carregadas aqui -->\n            </div>\n        </div>\n        \n        <div class=\"section\">\n            <h3>‚öôÔ∏è Configura√ß√µes de √Åudio</h3>\n            <div style=\"display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;\">\n                <div class=\"input-group\">\n                    <label for=\"speakingRate\">Velocidade (0.25-4.0):</label>\n                    <input type=\"range\" id=\"speakingRate\" min=\"0.25\" max=\"4\" step=\"0.1\" value=\"1\">\n                    <span id=\"rateValue\">1.0</span>\n                </div>\n                <div class=\"input-group\">\n                    <label for=\"pitch\">Tom (-20 a +20):</label>\n                    <input type=\"range\" id=\"pitch\" min=\"-20\" max=\"20\" step=\"1\" value=\"0\">\n                    <span id=\"pitchValue\">0</span>\n                </div>\n                <div class=\"input-group\">\n                    <label for=\"volumeGain\">Volume (-96 a +16 dB):</label>\n                    <input type=\"range\" id=\"volumeGain\" min=\"-96\" max=\"16\" step=\"1\" value=\"0\">\n                    <span id=\"volumeValue\">0 dB</span>\n                </div>\n            </div>\n        </div>\n        \n        <div class=\"section\">\n            <h3>üìù Texto para Fala</h3>\n            <div class=\"input-group\">\n                <label for=\"textInput\">Digite o texto:</label>\n                <textarea id=\"textInput\" placeholder=\"Digite aqui o texto que voc√™ quer ouvir...\">Ol√°! Eu sou o J.A.R.V.I.S com Google Cloud Text-to-Speech. Esta √© uma demonstra√ß√£o da qualidade de voz premium do Google.</textarea>\n            </div>\n            <button onclick=\"speakText()\" id=\"speakBtn\">üó£Ô∏è Falar Texto</button>\n            <button onclick=\"stopAudio()\">‚èπÔ∏è Parar</button>\n            <button onclick=\"testRandomPhrase()\">üé≤ Frase Aleat√≥ria</button>\n        </div>\n        \n        <div class=\"section\">\n            <h3>üß™ Testes R√°pidos</h3>\n            <button onclick=\"testVoice('pt-BR-Standard-A')\">üé§ Standard Feminina</button>\n            <button onclick=\"testVoice('pt-BR-Standard-B')\">üé§ Standard Masculina</button>\n            <button onclick=\"testVoice('pt-BR-Wavenet-A')\">‚≠ê WaveNet Feminina</button>\n            <button onclick=\"testVoice('pt-BR-Neural2-A')\">üß† Neural2 Feminina</button>\n            <button onclick=\"testAllVoices()\">üé≠ Testar Todas</button>\n        </div>\n        \n        <div class=\"section\">\n            <h3>üìä Status e Logs</h3>\n            <div id=\"testStatus\" class=\"status info\">‚ÑπÔ∏è Pronto para testes</div>\n            <div class=\"logs\" id=\"logs\">üåê Google Cloud TTS Tester v1.0\nPronto para come√ßar...\n</div>\n        </div>\n    </div>\n\n    <script>\n        let currentAudio = null;\n        let selectedVoice = 'pt-BR-Standard-A';\n        \n        const availableVoices = {\n            'pt-BR-Standard-A': { gender: 'FEMALE', type: 'Standard', description: 'Voz feminina padr√£o' },\n            'pt-BR-Standard-B': { gender: 'MALE', type: 'Standard', description: 'Voz masculina padr√£o' },\n            'pt-BR-Standard-C': { gender: 'FEMALE', type: 'Standard', description: 'Voz feminina alternativa' },\n            'pt-BR-Wavenet-A': { gender: 'FEMALE', type: 'WaveNet', description: 'Voz feminina premium' },\n            'pt-BR-Wavenet-B': { gender: 'MALE', type: 'WaveNet', description: 'Voz masculina premium' },\n            'pt-BR-Wavenet-C': { gender: 'FEMALE', type: 'WaveNet', description: 'Voz feminina premium alt.' },\n            'pt-BR-Neural2-A': { gender: 'FEMALE', type: 'Neural2', description: 'Voz neural feminina' },\n            'pt-BR-Neural2-B': { gender: 'MALE', type: 'Neural2', description: 'Voz neural masculina' },\n            'pt-BR-Neural2-C': { gender: 'FEMALE', type: 'Neural2', description: 'Voz neural feminina alt.' }\n        };\n        \n        const testPhrases = [\n            'Ol√°! Eu sou o J.A.R.V.I.S, seu assistente virtual inteligente.',\n            'Sistema de voz Google Cloud funcionando perfeitamente.',\n            'Qualidade de √°udio superior com tecnologia de ponta.',\n            'Como posso ajud√°-lo hoje?',\n            'Processando sua solicita√ß√£o com intelig√™ncia artificial.',\n            'Todos os sistemas operacionais e funcionando normalmente.',\n            'Bem-vindo ao futuro da assist√™ncia virtual.',\n            'Tecnologia Google Cloud Text-to-Speech em a√ß√£o.'\n        ];\n        \n        // Inicializa√ß√£o\n        document.addEventListener('DOMContentLoaded', function() {\n            loadApiKey();\n            setupVoiceGrid();\n            setupSliders();\n            log('Sistema inicializado com sucesso!');\n        });\n        \n        function setupVoiceGrid() {\n            const grid = document.getElementById('voiceGrid');\n            \n            Object.entries(availableVoices).forEach(([voiceName, info]) => {\n                const div = document.createElement('div');\n                div.className = 'voice-option';\n                if (voiceName === selectedVoice) div.classList.add('selected');\n                \n                div.innerHTML = `\n                    <strong>${voiceName}</strong><br>\n                    <small>${info.description}</small><br>\n                    <span style=\"color: #00AAFF;\">${info.type} - ${info.gender}</span>\n                `;\n                \n                div.onclick = () => selectVoice(voiceName);\n                grid.appendChild(div);\n            });\n        }\n        \n        function setupSliders() {\n            const rateSlider = document.getElementById('speakingRate');\n            const pitchSlider = document.getElementById('pitch');\n            const volumeSlider = document.getElementById('volumeGain');\n            \n            rateSlider.oninput = () => {\n                document.getElementById('rateValue').textContent = rateSlider.value;\n            };\n            \n            pitchSlider.oninput = () => {\n                document.getElementById('pitchValue').textContent = pitchSlider.value;\n            };\n            \n            volumeSlider.oninput = () => {\n                document.getElementById('volumeValue').textContent = volumeSlider.value + ' dB';\n            };\n        }\n        \n        function selectVoice(voiceName) {\n            // Remover sele√ß√£o anterior\n            document.querySelectorAll('.voice-option').forEach(el => {\n                el.classList.remove('selected');\n            });\n            \n            // Adicionar nova sele√ß√£o\n            event.target.classList.add('selected');\n            selectedVoice = voiceName;\n            \n            log(`Voz selecionada: ${voiceName}`);\n            updateStatus(`Voz selecionada: ${voiceName} (${availableVoices[voiceName].description})`, 'info');\n        }\n        \n        function saveApiKey() {\n            const apiKey = document.getElementById('apiKey').value.trim();\n            if (!apiKey) {\n                updateApiStatus('‚ùå Digite uma API key v√°lida', 'error');\n                return;\n            }\n            \n            localStorage.setItem('google_tts_api_key', apiKey);\n            updateApiStatus('‚úÖ API key salva com sucesso!', 'success');\n            log('API key configurada');\n        }\n        \n        function clearApiKey() {\n            localStorage.removeItem('google_tts_api_key');\n            document.getElementById('apiKey').value = '';\n            updateApiStatus('üóëÔ∏è API key removida', 'info');\n            log('API key removida');\n        }\n        \n        function loadApiKey() {\n            const saved = localStorage.getItem('google_tts_api_key');\n            if (saved) {\n                document.getElementById('apiKey').value = saved;\n                updateApiStatus('‚úÖ API key carregada do armazenamento local', 'success');\n                log('API key carregada automaticamente');\n            }\n        }\n        \n        async function speakText() {\n            const apiKey = document.getElementById('apiKey').value.trim();\n            const text = document.getElementById('textInput').value.trim();\n            \n            if (!apiKey) {\n                updateStatus('‚ùå Configure a API key primeiro', 'error');\n                return;\n            }\n            \n            if (!text) {\n                updateStatus('‚ùå Digite um texto para falar', 'error');\n                return;\n            }\n            \n            const speakBtn = document.getElementById('speakBtn');\n            speakBtn.disabled = true;\n            speakBtn.textContent = 'üîÑ Processando...';\n            \n            try {\n                updateStatus('üîÑ Gerando √°udio...', 'info');\n                log(`Enviando texto: \"${text.substring(0, 50)}${text.length > 50 ? '...' : ''}\"`);\n                \n                const requestData = {\n                    input: { text: text },\n                    voice: {\n                        languageCode: 'pt-BR',\n                        name: selectedVoice,\n                        ssmlGender: availableVoices[selectedVoice].gender\n                    },\n                    audioConfig: {\n                        audioEncoding: 'MP3',\n                        speakingRate: parseFloat(document.getElementById('speakingRate').value),\n                        pitch: parseFloat(document.getElementById('pitch').value),\n                        volumeGainDb: parseFloat(document.getElementById('volumeGain').value)\n                    }\n                };\n                \n                log('Fazendo requisi√ß√£o para Google Cloud TTS...');\n                \n                const response = await fetch(`https://texttospeech.googleapis.com/v1/text:synthesize?key=${apiKey}`, {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json'\n                    },\n                    body: JSON.stringify(requestData)\n                });\n                \n                if (!response.ok) {\n                    const errorData = await response.json().catch(() => ({}));\n                    throw new Error(`API Error ${response.status}: ${errorData.error?.message || response.statusText}`);\n                }\n                \n                const data = await response.json();\n                \n                if (!data.audioContent) {\n                    throw new Error('Nenhum conte√∫do de √°udio retornado');\n                }\n                \n                log('√Åudio recebido, reproduzindo...');\n                await playAudioFromBase64(data.audioContent);\n                \n                updateStatus('‚úÖ √Åudio reproduzido com sucesso!', 'success');\n                log('Reprodu√ß√£o conclu√≠da');\n                \n            } catch (error) {\n                console.error('Erro:', error);\n                updateStatus(`‚ùå Erro: ${error.message}`, 'error');\n                log(`ERRO: ${error.message}`);\n            } finally {\n                speakBtn.disabled = false;\n                speakBtn.textContent = 'üó£Ô∏è Falar Texto';\n            }\n        }\n        \n        async function playAudioFromBase64(base64Audio) {\n            return new Promise((resolve, reject) => {\n                try {\n                    // Parar √°udio anterior\n                    stopAudio();\n                    \n                    // Converter base64 para blob\n                    const binaryString = atob(base64Audio);\n                    const bytes = new Uint8Array(binaryString.length);\n                    for (let i = 0; i < binaryString.length; i++) {\n                        bytes[i] = binaryString.charCodeAt(i);\n                    }\n                    \n                    const blob = new Blob([bytes], { type: 'audio/mpeg' });\n                    const audioUrl = URL.createObjectURL(blob);\n                    \n                    // Criar elemento de √°udio\n                    currentAudio = new Audio(audioUrl);\n                    \n                    currentAudio.onended = () => {\n                        URL.revokeObjectURL(audioUrl);\n                        currentAudio = null;\n                        resolve();\n                    };\n                    \n                    currentAudio.onerror = (error) => {\n                        URL.revokeObjectURL(audioUrl);\n                        currentAudio = null;\n                        reject(new Error('Erro ao reproduzir √°udio'));\n                    };\n                    \n                    // Reproduzir √°udio\n                    currentAudio.play();\n                    \n                } catch (error) {\n                    reject(error);\n                }\n            });\n        }\n        \n        function stopAudio() {\n            if (currentAudio) {\n                currentAudio.pause();\n                currentAudio.currentTime = 0;\n                currentAudio = null;\n                log('√Åudio interrompido');\n            }\n        }\n        \n        function testRandomPhrase() {\n            const randomPhrase = testPhrases[Math.floor(Math.random() * testPhrases.length)];\n            document.getElementById('textInput').value = randomPhrase;\n            log(`Frase aleat√≥ria selecionada: \"${randomPhrase}\"`);\n            speakText();\n        }\n        \n        async function testVoice(voiceName) {\n            selectVoice(voiceName);\n            document.getElementById('textInput').value = `Testando a voz ${voiceName}. Esta √© uma demonstra√ß√£o da qualidade de √°udio.`;\n            await speakText();\n        }\n        \n        async function testAllVoices() {\n            updateStatus('üé≠ Testando todas as vozes...', 'info');\n            \n            for (const voiceName of Object.keys(availableVoices)) {\n                log(`Testando voz: ${voiceName}`);\n                selectVoice(voiceName);\n                document.getElementById('textInput').value = `Ol√°, eu sou a voz ${voiceName}.`;\n                \n                try {\n                    await speakText();\n                    await new Promise(resolve => setTimeout(resolve, 2000)); // Pausa entre vozes\n                } catch (error) {\n                    log(`Erro ao testar ${voiceName}: ${error.message}`);\n                }\n            }\n            \n            updateStatus('‚úÖ Teste de todas as vozes conclu√≠do!', 'success');\n        }\n        \n        function updateStatus(message, type) {\n            const status = document.getElementById('testStatus');\n            status.textContent = message;\n            status.className = `status ${type}`;\n        }\n        \n        function updateApiStatus(message, type) {\n            const status = document.getElementById('apiStatus');\n            status.textContent = message;\n            status.className = `status ${type}`;\n        }\n        \n        function log(message) {\n            const logs = document.getElementById('logs');\n            const timestamp = new Date().toLocaleTimeString();\n            logs.textContent += `\\n[${timestamp}] ${message}`;\n            logs.scrollTop = logs.scrollHeight;\n        }\n    </script>\n</body>\n</html>"