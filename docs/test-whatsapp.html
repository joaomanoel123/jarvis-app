<!DOCTYPE html>\n<html lang=\"pt-BR\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Teste WhatsApp - Jarvis</title>\n    <style>\n        body {\n            font-family: Arial, sans-serif;\n            max-width: 800px;\n            margin: 50px auto;\n            padding: 20px;\n            background: #1a1a1a;\n            color: #fff;\n        }\n        .test-container {\n            background: #2a2a2a;\n            padding: 30px;\n            border-radius: 10px;\n            margin: 20px 0;\n        }\n        button {\n            background: #00AAFF;\n            color: white;\n            border: none;\n            padding: 15px 30px;\n            margin: 10px;\n            border-radius: 5px;\n            cursor: pointer;\n            font-size: 16px;\n        }\n        button:hover {\n            background: #0088CC;\n        }\n        input {\n            width: 300px;\n            padding: 10px;\n            margin: 10px;\n            border: 1px solid #555;\n            border-radius: 5px;\n            background: #333;\n            color: #fff;\n        }\n        .log {\n            background: #000;\n            padding: 15px;\n            border-radius: 5px;\n            margin: 10px 0;\n            font-family: monospace;\n            max-height: 300px;\n            overflow-y: auto;\n        }\n        .success { color: #4CAF50; }\n        .error { color: #f44336; }\n        .info { color: #2196F3; }\n        .warning { color: #ff9800; }\n    </style>\n</head>\n<body>\n    <h1>🧪 Teste de Comandos WhatsApp - Jarvis</h1>\n    \n    <div class=\"test-container\">\n        <h2>📱 Teste Direto do WhatsApp</h2>\n        <p>Clique nos botões abaixo para testar diferentes comandos:</p>\n        \n        <button onclick=\"testCommand('whatsapp')\">Teste: \"whatsapp\"</button>\n        <button onclick=\"testCommand('abrir whatsapp')\">Teste: \"abrir whatsapp\"</button>\n        <button onclick=\"testCommand('abra whatsapp')\">Teste: \"abra whatsapp\"</button>\n        <button onclick=\"testCommand('zap')\">Teste: \"zap\"</button>\n        \n        <br><br>\n        \n        <input type=\"text\" id=\"customCommand\" placeholder=\"Digite seu próprio comando...\">\n        <button onclick=\"testCustomCommand()\">Testar Comando Personalizado</button>\n        \n        <br><br>\n        \n        <button onclick=\"openWhatsAppDirect()\">🚀 Abrir WhatsApp Web Diretamente</button>\n        <button onclick=\"clearLog()\">🧹 Limpar Log</button>\n    </div>\n    \n    <div class=\"test-container\">\n        <h2>📊 Log de Testes</h2>\n        <div id=\"log\" class=\"log\"></div>\n    </div>\n    \n    <script>\n        function log(message, type = 'info') {\n            const logDiv = document.getElementById('log');\n            const timestamp = new Date().toLocaleTimeString();\n            const className = type;\n            logDiv.innerHTML += `<div class=\"${className}\">[${timestamp}] ${message}</div>`;\n            logDiv.scrollTop = logDiv.scrollHeight;\n        }\n        \n        function clearLog() {\n            document.getElementById('log').innerHTML = '';\n            log('Log limpo', 'info');\n        }\n        \n        function testCommand(command) {\n            log(`🧪 Testando comando: \"${command}\"`, 'info');\n            \n            // Simular a função handleLocalCommands\n            const result = handleLocalCommands(command);\n            \n            if (result) {\n                log(`✅ Comando processado localmente: ${command}`, 'success');\n            } else {\n                log(`❌ Comando NÃO foi processado localmente: ${command}`, 'error');\n            }\n        }\n        \n        function testCustomCommand() {\n            const command = document.getElementById('customCommand').value;\n            if (command.trim()) {\n                testCommand(command);\n                document.getElementById('customCommand').value = '';\n            } else {\n                log('⚠️ Digite um comando primeiro', 'warning');\n            }\n        }\n        \n        function openWhatsAppDirect() {\n            log('🚀 Tentando abrir WhatsApp Web diretamente...', 'info');\n            \n            try {\n                const newWindow = window.open('https://web.whatsapp.com', '_blank', 'noopener,noreferrer');\n                \n                if (newWindow) {\n                    log('✅ WhatsApp Web aberto com sucesso!', 'success');\n                } else {\n                    log('⚠️ Popup bloqueado pelo navegador', 'warning');\n                    \n                    // Tentar método alternativo\n                    const link = document.createElement('a');\n                    link.href = 'https://web.whatsapp.com';\n                    link.target = '_blank';\n                    link.rel = 'noopener noreferrer';\n                    document.body.appendChild(link);\n                    link.click();\n                    document.body.removeChild(link);\n                    \n                    log('✅ WhatsApp Web aberto com método alternativo', 'success');\n                }\n            } catch (error) {\n                log(`❌ Erro ao abrir WhatsApp Web: ${error.message}`, 'error');\n            }\n        }\n        \n        // Função copiada do main.js para teste\n        function handleLocalCommands(message) {\n            console.log('🔍 DEBUG: Verificando comando local:', message);\n            log(`🔍 Verificando comando: \"${message}\"`, 'info');\n            \n            const msg = message.toLowerCase().trim();\n            console.log('🔍 DEBUG: Mensagem normalizada:', msg);\n            log(`🔍 Mensagem normalizada: \"${msg}\"`, 'info');\n            \n            // Comandos do WhatsApp - Detecção mais ampla\n            const whatsappKeywords = ['whatsapp', 'whats app', 'whats', 'zap', 'abrir whatsapp', 'abra whatsapp', 'abre whatsapp'];\n            const isWhatsAppCommand = whatsappKeywords.some(keyword => msg.includes(keyword));\n            \n            console.log('🔍 DEBUG: É comando WhatsApp?', isWhatsAppCommand);\n            log(`🔍 É comando WhatsApp? ${isWhatsAppCommand}`, isWhatsAppCommand ? 'success' : 'warning');\n            \n            if (isWhatsAppCommand) {\n                console.log('🎯 COMANDO WHATSAPP DETECTADO LOCALMENTE!');\n                log('🎯 COMANDO WHATSAPP DETECTADO LOCALMENTE!', 'success');\n                \n                // Simular abertura do WhatsApp\n                setTimeout(() => {\n                    openWhatsAppDirect();\n                }, 500);\n                \n                return true;\n            }\n            \n            // Outros comandos locais\n            if (msg.includes('google')) {\n                log('🎯 Comando Google detectado', 'success');\n                window.open('https://www.google.com', '_blank');\n                return true;\n            }\n            \n            if (msg.includes('youtube')) {\n                log('🎯 Comando YouTube detectado', 'success');\n                window.open('https://www.youtube.com', '_blank');\n                return true;\n            }\n            \n            log('🔍 Nenhum comando local detectado', 'warning');\n            return false;\n        }\n        \n        // Permitir Enter no input\n        document.getElementById('customCommand').addEventListener('keypress', function(e) {\n            if (e.key === 'Enter') {\n                testCustomCommand();\n            }\n        });\n        \n        // Log inicial\n        log('🧪 Sistema de teste carregado', 'success');\n        log('💡 Dica: Teste diferentes comandos para ver como são detectados', 'info');\n    </script>\n</body>\n</html>"